<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>HttpRequest Lib</title>
    <link href="./style.css" rel="stylesheet">
</head>
<body>

<h1>HttpRequest Test Page</h1>

<p>Test requests against <a href="https://httpbin.org/">https://httpbin.org/</a></p>

<h2>GET Text</h2>
<pre class="code">
const url    : string             = "https://httpbin.org/get";
const options: HttpRequestOptions = {responseType: "text"};

HttpRequest.get(url, options, (res: HttpRequestResponse): void => {
    resField.innerText = JSON.stringify(res, null, 2);
});
</pre>
<button type="button" id="get-text-btn">GET Text</button>
<pre id="get-text-res" class="res"></pre>


<h2>GET JSON</h2>
<pre class="code">
const url    : string             = "https://httpbin.org/get";
const options: HttpRequestOptions = {responseType: "json"};

HttpRequest.get(url, options, (res: HttpRequestResponse): void => {
    resField.innerText = JSON.stringify(res, null, 2);
});
</pre>
<button type="button" id="get-json-btn">GET JSON</button>
<pre id="get-json-res" class="res"></pre>


<h2>POST Text</h2>
<pre class="code">
const url    : string             = "https://httpbin.org/post";
const options: HttpRequestOptions = {responseType: "json"};
const bodyTxt: string             = "Hello, world!";

HttpRequest.post(url, bodyTxt, options, (res: HttpRequestResponse): void => {
    resField.innerText = JSON.stringify(res, null, 2);
});
</pre>
<button type="button" id="post-text-btn">POST Text</button>
<pre id="post-text-res" class="res"></pre>


<h2>POST JSON</h2>
<pre class="code">
const url    : string             = "https://httpbin.org/anything";
const options: HttpRequestOptions = { responseType: "json" };
const body   : any                = { foo: "bar", baz: 42, "поле на форма": "Здравей, Свят!" };

HttpRequest.json(url, body, options, (res: HttpRequestResponse): void => {
    resField.innerText = JSON.stringify(res, null, 2);
});
</pre>
<button type="button" id="post-json-btn">POST JSON</button>
<pre id="post-json-res" class="res"></pre>


<h2>POST Form</h2>
<pre class="code">
const url    : string                               = "https://httpbin.org/post";
const options: HttpRequestOptions                   = { responseType: "json" };
const form   : { [param: string]: string | number } = { foo: "bar", baz: 42, "поле на форма": "Здравей, Свят!" };

HttpRequest.form(url, form, options, (res: HttpRequestResponse): void => {
    resField.innerText = JSON.stringify(res, null, 2);
});
</pre>
<button type="button" id="post-form-btn">POST Form</button>
<pre id="post-form-res" class="res"></pre>


<h2>Timeout</h2>
<pre class="code">
const url    : string             = "https://httpbin.org/delay/10";
const options: HttpRequestOptions = {timeout: 2 * 1000, responseType: "json"};

HttpRequest.get(url, options, (res: HttpRequestResponse): void => {
    resField.innerText = JSON.stringify(res, null, 2);
});
</pre>
<button type="button" id="post-timeout-btn">Timeout</button>
<pre id="post-timeout-res" class="res"></pre>


<h2>Resources not found (404)</h2>
<pre class="code">
const url    : string             = "https://httpbin.org/status/404";
const options: HttpRequestOptions = {responseType: "json"};

HttpRequest.get(url, options, (res: HttpRequestResponse): void => {
    resField.innerText = JSON.stringify(res, null, 2);
});
</pre>
<button type="button" id="post-404-btn">Get 404</button>
<pre id="post-404-res" class="res"></pre>


<script src="index.js"></script>
<script>
    const app = new Application();
    app.initialize();
</script>
</body>
</html>
